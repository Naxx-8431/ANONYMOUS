<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="ANONYMOUS – Latest posts from the community." />
    <title>Home – ANONYMOUS</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <!-- Navbar -->
    <nav class="anon-navbar d-flex align-items-center justify-content-between">
        <a href="index.html" class="brand">ANONYMOUS</a>
        <div class="d-flex align-items-center gap-2">
            <a href="index.html" class="nav-link active" id="navHome">HOME</a>
            <a href="profile.html" class="nav-link" id="navProfile">PROFILE</a>
            <button class="nav-link" id="navLogout"
                style="background:none; border:1px solid #330000; cursor:pointer;">LOGOUT</button>
        </div>
    </nav>

    <div class="page-wrapper">

        <!-- Search bar -->
        <div class="search-wrapper">
            <input type="search" class="form-control" id="searchInput" placeholder="search posts..."
                autocomplete="off" />
            <button class="btn-anon btn-anon-sm" id="searchBtn">[ find ]</button>
            <button class="btn-anon-ghost btn-anon-sm" id="clearSearch" style="display:none;">[ clear ]</button>
        </div>

        <div id="searchStatus" style="color:#444; font-size:0.78rem; letter-spacing:1px; margin-bottom:12px;"></div>

        <!-- New Post form (collapsible) -->
        <div style="margin-bottom:18px; text-align:right;">
            <button class="btn-anon btn-anon-sm" id="togglePostForm">[ + new post ]</button>
        </div>

        <div id="postFormWrapper" style="display:none;" class="site-box mb-anon">
            <div class="section-title">Post Anonymously</div>
            <div id="postAlertBox" style="display:none;" class="anon-alert"></div>
            <form id="newPostForm" novalidate>
                <div class="mb-3">
                    <label class="anon-label" for="postTitle">Title</label>
                    <input type="text" class="form-control" id="postTitle" maxlength="120" placeholder="Post title..."
                        required />
                    <div class="invalid-feedback" id="postTitleErr"></div>
                </div>
                <div class="mb-3">
                    <label class="anon-label" for="postBody">Content</label>
                    <textarea class="form-control" id="postBody" rows="5" maxlength="4000"
                        placeholder="Write anything..." required></textarea>
                    <div class="invalid-feedback" id="postBodyErr"></div>
                    <div style="color:#333; font-size:0.72rem; margin-top:4px; text-align:right;">
                        <span id="charCount">0</span> / 4000
                    </div>
                </div>
                <button type="submit" class="btn-anon btn-anon-sm" id="submitPost">[ submit ]</button>
                <button type="button" class="btn-anon-ghost btn-anon-sm ms-2" id="cancelPost">[ cancel ]</button>
            </form>
        </div>

        <!-- Post list -->
        <div class="section-title" id="postsHeading">LATEST POSTS</div>
        <div id="postList"></div>
        <div id="emptyMsg"
            style="display:none; color:#333; font-size:0.88rem; text-align:center; padding:40px 0; letter-spacing:2px;">
            NO POSTS YET. BE THE FIRST.
        </div>

        <!-- Post Detail Modal -->
        <div id="postModal"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:1000; overflow-y:auto;">
            <div style="max-width:680px; margin:40px auto; padding:0 16px;">
                <button id="closeModal" class="btn-anon-ghost btn-anon-sm" style="margin-bottom:16px;">[ &larr; back
                    ]</button>

                <div id="modalContent"></div>

                <!-- Comments section -->
                <div class="section-title" style="margin-top:30px;">COMMENTS</div>
                <div id="commentList"></div>
                <div id="noComments"
                    style="color:#333; font-size:0.82rem; text-align:center; padding:12px 0; letter-spacing:1px;">NO
                    COMMENTS.</div>

                <!-- Add comment -->
                <div style="margin-top:20px; border-top:1px solid #1a1a1a; padding-top:16px;">
                    <div class="anon-label" style="margin-bottom:8px;">Reply anonymously</div>
                    <textarea class="form-control" id="commentBody" rows="3" maxlength="1000"
                        placeholder="Write a comment..."></textarea>
                    <div style="color:#333; font-size:0.72rem; margin-top:4px; text-align:right;">
                        <span id="commentCharCount">0</span> / 1000
                    </div>
                    <div id="commentAlert" style="display:none; margin-top:8px;" class="anon-alert"></div>
                    <button class="btn-anon btn-anon-sm" style="margin-top:8px;" id="submitComment">[ post comment
                        ]</button>
                </div>
            </div>
        </div>

    </div>

    <div class="site-footer">ANONYMOUS &mdash; all posts are anonymous.</div>

    <script src="app.js"></script>
    <script src="home.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
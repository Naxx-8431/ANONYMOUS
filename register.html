<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Create your anonymous account – ANONYMOUS community." />
    <title>Register – ANONYMOUS</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>

<body>

    <div style="border-bottom: 2px solid #8b0000; padding: 10px 20px;">
        <a href="welcome.html"
            style="color:#ff0000; text-decoration:none; font-size:1.1rem; letter-spacing:3px; font-family:'Courier Prime', monospace; text-transform:uppercase;">
            &larr; ANONYMOUS
        </a>
    </div>

    <div class="auth-box">

        <!-- ======================================================
         STEP 1 – Account Details
         ====================================================== -->
        <div id="step1">
            <div class="auth-title">Register</div>
            <div class="auth-sub">create your anonymous identity</div>

            <div id="alertBox" style="display:none;" class="anon-alert"></div>

            <!-- Safety Hints -->
            <div class="form-hint">
                <strong>&#9888; Safety Reminders:</strong><br />
                &bull; Do <strong>not</strong> use your real name as a username.<br />
                &bull; Use a <strong>separate, throwaway email</strong> for this account.<br />
                &bull; Use a <strong>random or generated password</strong> — never reuse one.<br />
                &bull; No information you provide will be shown to other users.
            </div>

            <form id="registerForm" novalidate autocomplete="off">

                <!-- Username -->
                <div class="mb-3">
                    <label class="anon-label" for="regUsername">Username</label>
                    <input type="text" class="form-control" id="regUsername" placeholder="e.g. ghost_4827"
                        maxlength="30" autocomplete="off" required />
                    <div class="invalid-feedback" id="usernameErr"></div>
                    <small class="form-hint" style="margin-top:6px; padding:6px 10px;">
                        Random alias only. <strong>No real names.</strong> 3–30 chars, letters/numbers/underscores.
                    </small>
                </div>

                <!-- Email -->
                <div class="mb-3">
                    <label class="anon-label" for="regEmail">Email Address</label>
                    <input type="email" class="form-control" id="regEmail" placeholder="throwaway@example.com"
                        autocomplete="off" required />
                    <div class="invalid-feedback" id="emailErr"></div>
                    <small class="form-hint" style="margin-top:6px; padding:6px 10px;">
                        <strong>OTP will be sent here.</strong> Use a throwaway email not linked to your identity.
                    </small>
                </div>

                <!-- Password -->
                <div class="mb-3">
                    <label class="anon-label" for="regPassword">Password</label>
                    <input type="password" class="form-control" id="regPassword" placeholder="••••••••••••"
                        maxlength="128" autocomplete="new-password" required />
                    <div class="invalid-feedback" id="passwordErr"></div>
                    <small class="form-hint" style="margin-top:6px; padding:6px 10px;">
                        Min 8 chars. Include uppercase, lowercase, number and symbol.
                    </small>
                </div>

                <!-- Confirm Password -->
                <div class="mb-3">
                    <label class="anon-label" for="regConfirm">Confirm Password</label>
                    <input type="password" class="form-control" id="regConfirm" placeholder="••••••••••••"
                        maxlength="128" autocomplete="new-password" required />
                    <div class="invalid-feedback" id="confirmErr"></div>
                </div>

                <!-- Password strength bar -->
                <div id="strengthBar" style="height:4px; background:#1a1a1a; margin-bottom:6px;">
                    <div id="strengthFill" style="height:100%; width:0%; background:#8b0000;"></div>
                </div>
                <div id="strengthLabel" style="color:#444; font-size:0.72rem; letter-spacing:1px; margin-bottom:16px;">
                </div>

                <button type="submit" class="btn-anon w-100" id="sendOtpBtn">[ send verification code ]</button>

                <div style="margin-top:16px; text-align:center; color:#333; font-size:0.8rem;">
                    Already have an account? <a href="login.html">enter here</a>
                </div>
            </form>
        </div>

        <!-- ======================================================
         STEP 2 – OTP Verification
         ====================================================== -->
        <div id="step2" style="display:none;">
            <div class="auth-title">Verify Email</div>
            <div class="auth-sub">enter the code sent to your email</div>

            <div id="otpAlertBox" style="display:none;" class="anon-alert"></div>

            <div class="form-hint">
                <strong>&#9993;</strong> A 6-digit code was sent to <strong id="maskedEmail">your email</strong>.<br />
                Check your inbox (and spam folder). Code expires in <strong>10 minutes</strong>.
            </div>

            <div class="mb-3">
                <label class="anon-label" for="otpInput">Verification Code</label>
                <input type="text" class="form-control" id="otpInput" placeholder="000000" maxlength="6"
                    autocomplete="one-time-code" inputmode="numeric"
                    style="font-size:1.6rem; letter-spacing:10px; text-align:center;" />
                <div class="invalid-feedback" id="otpErr"></div>
            </div>

            <!-- Resend -->
            <div style="margin-bottom:16px; font-size:0.8rem; color:#444; text-align:center;">
                Didn't receive it?
                <button id="resendBtn" class="btn-anon-ghost btn-anon-sm" style="margin-left:8px;" disabled>
                    [ resend ] (<span id="resendTimer">60</span>s)
                </button>
            </div>

            <button class="btn-anon w-100" id="verifyOtpBtn">[ verify &amp; create account ]</button>

            <div style="margin-top:12px; text-align:center;">
                <button class="btn-anon-ghost btn-anon-sm" id="backToStep1">[ &larr; go back ]</button>
            </div>
        </div>

    </div>

    <div class="site-footer">ANONYMOUS &mdash; no identity required.</div>

    <script src="app.js"></script>
    <script src="register.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>